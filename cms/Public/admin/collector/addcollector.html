<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>添加采集器</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/css/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/css/collector.css" />
    <script type="text/javascript" src="__PUBLIC__/js/jquery.js"></script>
    <script type="text/javascript" src="__PUBLIC__/js/jquery-ui-1.8.6.custom.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/js/collector.js"></script>
  </head>
  <body>
      <div id="rightTop">
        <ul class="subnav">
            <li><a href="javascript:showDiv(1);" class="btn4">基本信息规则</a></li>
            <li><a href="javascript:showDiv(2);" class="btn4">书名信息规则</a></li>
            <li><a href="javascript:showDiv(3);" class="btn4">章节和内容规则</a></li>
        </ul>
      </div>
      <div class="mrightTop">
          <div class="fontr"></div>
      </div>
      <div class="main">
          <div class="collector">
          <form action="?s=admin/collector/addCollectorCGI" method="post" onSubmit="return checkFrom();">
            <div class="addTitle">
              <p style="color:#ff5400;font-weight: bold;">关于采集规则的说明</p>
              <p style="color:#ff5400;text-align: left;">1.采集规则由三部份构成，（要采集内容前面的字符串+{内容}+要采集内容后面的字符串），这里通用规则的写法，还要注意，规则后面不要有空格或是回车或是换行，否则这些全都算在规则里采集匹配；<br />2.在基本规则里有些特定的规则，这些特定规则将在此输入框下说明。</p>
            </div>
            <div class="addContent">
                <div id="showInfo" style="display: none;"></div>
                <div class="card" id="guide1">
                    <p><label>采集器名称：</label><input type="text" value="" name="collector_name" class="add" id="collector_name" /></p>
                    <p><label>采集网站地址：</label><input type="text" value="" name="collector_site_role[]" class="add" /></p>
                    <p><label>书库URL规则：</label><input type="text" value="" name="collector_site_role[]" class="add" /></p>
                    <p style="color:#ff5400;">书库URL规则如：http://www.cms.com/allbook.php?page=3 形式 ,规则要写成：http://www.cms.com/allbook.php?page={ * }，由{ * }代替页码,中间没空格</p>
                    <p><label>章节列表URL规则：</label><input type="text" value="" name="collector_site_role[]" class="add" /></p>
                    <p style="color:#ff5400;">这里有两种形式，一、可如上面书库的写法，用{ * }代替书ID号；二、可写成通用规则形式，这个内容在书信息页里采集；</p>
                    <p><label>源网站编码：</label><input type="radio" value="auto" name="site_coding" checked="checked" />自动&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                               <input type="radio" value="utf-8" name="site_coding" />UTF-8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                               <input type="radio" value="gb2312" name="site_coding" />GB2312&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                               <input type="radio" value="big5" name="site_coding" />BIG5</p>
                    <p style="color:#ff5400;">这里提供三种可供选择的源网站的编码方式，可手动选择，若不选，本采集器，将自动去尝试，找到网站的编码，这可能要多花一定的时间</p>
                    <p><label>图片本地化：</label><input type="radio" value="1" name="local_img" />是&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                               <input type="radio" value="0" name="local_img" checked="checked" />否</p>
                    <p style="color:#ff5400;">本采集器，提供图片的两种处理方式，选“是”，将会从远程下载图片到本地服务器上，“否”则只保存此图片的URL</p>
                    <p><label>书库起始页码：</label><input type="text" value="" name="collector_site_role[]" class="add" style="width:100px" /> <font color="#ff5400">如：1-5 表示从第1页到第5页</font></p>
                    <p><label>书库列表区域规则：</label><textarea cols="80" rows="3" name="collector_site_role[]" class="add"></textarea></p>
                    <p><label>书名每条列表规则：</label><textarea cols="80" rows="3" name="collector_site_role[]" class="add"></textarea></p>
                    <p><label>书名和链接规则：</label><textarea cols="80" rows="3" name="collector_site_role[]" class="add"></textarea></p>
                </div>
                <div class="card" id="guide2" style="display: none;">
                    <p><label>书籍序号：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍名称：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍关键字：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍简介：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍摘要：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍作者：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍类型：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍最后更新时间：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍总字数：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                    <p><label>书籍封面图：</label><textarea cols="80" rows="3" name="collector_book_role[]" class="add"></textarea></p>
                </div>
                <div class="card" id="guide3" style="display: none;">
                    <p><label>分卷区间：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节每条：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节序号：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节名称：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节总字数：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>最后更新时间：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节内容地址：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节内容文本：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                    <p><label>章节内容图片：</label><textarea cols="80" rows="3" name="collector_chapter_role[]" class="add"></textarea></p>
                </div>
            </div>
            <div class="control">
                <button onclick="$('form:first').submit();" class="formbtn4">完成并保存</button>
            </div>
            <div id="info" title="提示信息" style="display: none;">
                <p>
                    <span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
                    请填写采集器名和采集地址！
                </p>
            </div>
        </form>
        </div>
      </div>
  </body>
</html>
<script type="text/javascript">

    // 鼠标经过颜色变化
    /*
    var curColor = $(".add").css('background-color');
    $(".add").mouseover(function(){ $(this).css('background-color', '#bbdbf1');});
    $(".add").mouseout(function(){ $(this).css('background-color', curColor);});
    */
   
    // 规则三部分的分别显示
    function showDiv(id){
        for(var i = 1; i <= 5; i++){
            if(i == id){
                $("#guide" + i).fadeIn("slow");
            }else{
                $("#guide" + i).hide();
            }
        }
    }

    // 提交之前，检查规则完整性
    function checkFrom(){
        var collector_name = $("#collector_name").val();
        var collector_addr = $("#collector_addr").val();
        if(collector_addr == "" || collector_name == ""){
           $( "#info" ).dialog({
			resizable: false,
			height:200,
			modal: true,
			buttons: {
				"确定": function() {
					$( this ).dialog( "close" );
				}
			}
	   });
           return false;
        }
        return true;
    }
    
</script>